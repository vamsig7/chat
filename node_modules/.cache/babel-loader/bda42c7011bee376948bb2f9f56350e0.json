{"ast":null,"code":"import _slicedToArray from \"/home/krishnavamsi/Downloads/chat-master/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/krishnavamsi/Downloads/chat-master/src/components/chat/ConversationList/index.js\";\nimport React, { useState, useEffect } from \"react\";\nimport ConversationListItem from \"../ConversationListItem\";\nimport Toolbar from \"../Toolbar\";\nimport ToolbarButton from \"../ToolbarButton\";\nimport axios from \"axios\";\nimport \"./ConversationList.scss\";\nimport request from \"request\";\nexport default function ConversationList(props) {\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        conversations = _useState2[0],\n        setConversations = _useState2[1];\n\n  const _useState3 = useState(false),\n        _useState4 = _slicedToArray(_useState3, 2),\n        showPopUp = _useState4[0],\n        setShowPopUp = _useState4[1];\n\n  const _useState5 = useState(\"\"),\n        _useState6 = _slicedToArray(_useState5, 2),\n        searchUserName = _useState6[0],\n        setSearchUserName = _useState6[1];\n\n  useEffect(() => {\n    getConversations();\n  }, []);\n\n  function addNewUser() {\n    setShowPopUp(!showPopUp);\n  }\n\n  async function sendMessage(username) {\n    request.post({\n      url: \"http://node-server-t.herokuapp.com/api/v1/sendMessage\",\n      headers: {\n        Authorization: \"Bearer \" + localStorage.getItem(\"token\")\n      },\n      form: {\n        username: username,\n        message: \"fisrtMessage\"\n      }\n    }, (err, res, body) => {\n      if (err) throw err;else {\n        var convId = JSON.parse(body).convId;\n        getConversations(username, convId);\n      }\n    });\n  }\n\n  async function searchUser(event) {\n    if (event.key === \"Enter\") {\n      var name = event.target.value;\n      var body = await sendMessage(name);\n      console.log(\"this stupid thig waited\" + body);\n    }\n\n    event.persist();\n  }\n\n  const getConversations = (username, convId) => {\n    // axios.get(\"https://randomuser.me/api/\").then(response => {\n    //   let newConversations = response.data.results.map(result => {\n    //     return {\n    //       photo: result.picture.large,\n    //       name: `${result.name.first} ${result.name.last}`,\n    //       text:\n    //         \"Hello world! This is a long message that needs to be truncated.\"\n    //     };\n    //   });\n    let newConversations = [];\n    axios.get(\"https://randomuser.me/api/\").then(response => {\n      newConversations = [{\n        photo: response.picture.large,\n        name: username ? username : `${response.name.first} ${response.name.last}`,\n        text: convId\n      }];\n    });\n    setConversations([...conversations, ...newConversations]);\n  };\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"conversation-list\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }, React.createElement(Toolbar, {\n    title: \"Messenger\",\n    leftItems: [React.createElement(ToolbarButton, {\n      key: \"cog\",\n      icon: \"ion-ios-cog\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    })],\n    rightItems: [React.createElement(ToolbarButton, {\n      key: \"add\",\n      icon: \"ion-ios-add-circle-outline\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    })],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"footer\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    type: \"button\",\n    onClick: addNewUser,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, \"New Message\")), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }, showPopUp ? React.createElement(\"div\", {\n    className: \"popup\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"text\",\n    name: \"username\",\n    placeholder: \"username\",\n    onKeyDown: e => {\n      searchUser(e);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  })), React.createElement(\"button\", {\n    onClick: addNewUser,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103\n    },\n    __self: this\n  }, \"close me\")) : null), conversations.map(conversation => React.createElement(ConversationListItem, {\n    key: conversation.name,\n    data: conversation,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108\n    },\n    __self: this\n  }))));\n}","map":{"version":3,"sources":["/home/krishnavamsi/Downloads/chat-master/src/components/chat/ConversationList/index.js"],"names":["React","useState","useEffect","ConversationListItem","Toolbar","ToolbarButton","axios","request","ConversationList","props","conversations","setConversations","showPopUp","setShowPopUp","searchUserName","setSearchUserName","getConversations","addNewUser","sendMessage","username","post","url","headers","Authorization","localStorage","getItem","form","message","err","res","body","convId","JSON","parse","searchUser","event","key","name","target","value","console","log","persist","newConversations","get","then","response","photo","picture","large","first","last","text","e","map","conversation"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport ConversationListItem from \"../ConversationListItem\";\nimport Toolbar from \"../Toolbar\";\nimport ToolbarButton from \"../ToolbarButton\";\nimport axios from \"axios\";\nimport \"./ConversationList.scss\";\nimport request from \"request\";\n\nexport default function ConversationList(props) {\n  const [conversations, setConversations] = useState([]);\n  const [showPopUp, setShowPopUp] = useState(false);\n  const [searchUserName, setSearchUserName] = useState(\"\");\n  useEffect(() => {\n    getConversations();\n  }, []);\n  function addNewUser() {\n    setShowPopUp(!showPopUp);\n  }\n  async function sendMessage(username) {\n    request.post(\n      {\n        url: \"http://node-server-t.herokuapp.com/api/v1/sendMessage\",\n        headers: {\n          Authorization: \"Bearer \" + localStorage.getItem(\"token\")\n        },\n        form: {\n          username: username,\n          message: \"fisrtMessage\"\n        }\n      },\n      (err, res, body) => {\n        if (err) throw err;\n        else {\n          var convId = JSON.parse(body).convId;\n          getConversations(username, convId);\n        }\n      }\n    );\n  }\n  async function searchUser(event) {\n    if (event.key === \"Enter\") {\n      var name = event.target.value;\n      var body = await sendMessage(name);\n      console.log(\"this stupid thig waited\" + body);\n    }\n    event.persist();\n  }\n\n  const getConversations = (username, convId) => {\n    // axios.get(\"https://randomuser.me/api/\").then(response => {\n    //   let newConversations = response.data.results.map(result => {\n    //     return {\n    //       photo: result.picture.large,\n    //       name: `${result.name.first} ${result.name.last}`,\n    //       text:\n    //         \"Hello world! This is a long message that needs to be truncated.\"\n    //     };\n    //   });\n    let newConversations = [];\n    axios.get(\"https://randomuser.me/api/\").then(response => {\n      newConversations = [\n        {\n          photo: response.picture.large,\n          name: username\n            ? username\n            : `${response.name.first} ${response.name.last}`,\n          text: convId\n        }\n      ];\n    });\n\n    setConversations([...conversations, ...newConversations]);\n  };\n\n  return (\n    <div>\n      <div className=\"conversation-list\">\n        <Toolbar\n          title=\"Messenger\"\n          leftItems={[<ToolbarButton key=\"cog\" icon=\"ion-ios-cog\" />]}\n          rightItems={[\n            <ToolbarButton key=\"add\" icon=\"ion-ios-add-circle-outline\" />\n          ]}\n        />\n        <div className=\"footer\">\n          <button type=\"button\" onClick={addNewUser}>\n            New Message\n          </button>\n        </div>\n        <div>\n          {showPopUp ? (\n            <div className=\"popup\">\n              <div>\n                <input\n                  type=\"text\"\n                  name=\"username\"\n                  placeholder=\"username\"\n                  onKeyDown={e => {\n                    searchUser(e);\n                  }}\n                />\n              </div>\n              <button onClick={addNewUser}>close me</button>\n            </div>\n          ) : null}\n        </div>\n        {conversations.map(conversation => (\n          <ConversationListItem key={conversation.name} data={conversation} />\n        ))}\n      </div>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}