{"ast":null,"code":"import _regeneratorRuntime from\"/home/krishnavamsi/Downloads/chat-master/node_modules/@babel/runtime/regenerator\";import _classCallCheck from\"/home/krishnavamsi/Downloads/chat-master/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/krishnavamsi/Downloads/chat-master/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/krishnavamsi/Downloads/chat-master/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/krishnavamsi/Downloads/chat-master/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/krishnavamsi/Downloads/chat-master/node_modules/@babel/runtime/helpers/esm/inherits\";import React from\"react\";import loginImg from\"../../logo.svg\";import request from\"request\";export var Login=/*#__PURE__*/function(_React$Component){_inherits(Login,_React$Component);function Login(props){var _this;_classCallCheck(this,Login);_this=_possibleConstructorReturn(this,_getPrototypeOf(Login).call(this,props));_this.handleUserName=function(event){_this.setState({userName:event.target.value});};_this.handlePassWord=function(event){_this.setState({passWord:event.target.value});};_this.handleToken=function(event){};_this.state={userName:\"\",passWord:\"\",checkBox:true,rememberMe:true};return _this;}_createClass(Login,[{key:\"handleLoginButton\",value:function handleLoginButton(event){var token;return _regeneratorRuntime.async(function handleLoginButton$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _regeneratorRuntime.awrap(AccessToken(this.state.userName,this.state.passWord));case 2:token=_context.sent;console.log(token);if(token!==undefined&&!this.state.checkBox===true){localStorage.setItem(\"token\",token);localStorage.setItem(\"rememberMe\",true);this.setState({rememberMe:false});}event.persist();case 6:case\"end\":return _context.stop();}}},null,this);}},{key:\"render\",value:function render(){var _this2=this;return React.createElement(\"div\",{className:\"base-container\",ref:this.props.containerRef},React.createElement(\"div\",{className:\"header\"},\"Login\"),React.createElement(\"div\",{className:\"content\"},React.createElement(\"div\",{className:\"image\"},React.createElement(\"img\",{src:loginImg,alt:\"\"})),React.createElement(\"div\",{className:\"form\"},React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",{htmlFor:\"username\"},\"Username\"),React.createElement(\"input\",{type:\"text\",name:\"username\",placeholder:\"username\",onChange:this.handleUserName.bind(this)})),React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",{htmlFor:\"password\"},\"Password\"),React.createElement(\"input\",{type:\"password\",name:\"password\",placeholder:\"Password\",onChange:this.handlePassWord.bind(this)})))),React.createElement(\"div\",{className:\"loggedIn\"},React.createElement(\"input\",{className:\"checkbox\",type:\"checkbox\",defaultChecked:false,onChange:function onChange(){_this2.setState({checkBox:!_this2.state.checkBox});}}),React.createElement(\"label\",null,\"Keep me logged in \")),React.createElement(\"div\",{className:\"footer\",onClick:this.handleLoginButton.bind(this)},React.createElement(\"button\",{type:\"button\",className:\"btn\"},\"Login\")));}}]);return Login;}(React.Component);function AccessToken(userName,passWord){return _regeneratorRuntime.async(function AccessToken$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:return _context2.abrupt(\"return\",new Promise(function(resolve,reject){return request({url:\"http://node-server-t.herokuapp.com/api/v1/login\",form:{username:userName,password:passWord},method:\"POST\"},function(err,res,body){if(err)throw err;else{var token=JSON.parse(body).token.split(\" \")[1];resolve(token);}});}));case 1:case\"end\":return _context2.stop();}}});}// function handleResponse(response, username) {\n//   if (response === \"Username Exists\") {\n//     alert(\"Username  already exists Exists\");\n//   } else if (response === \"Internal db error\") {\n//     alert(\"Something went wrong try again later\");\n//   } else {\n//     alert(\"Successfully insertd\");\n//   }\n// }","map":{"version":3,"sources":["/home/krishnavamsi/Downloads/chat-master/src/components/login/login.jsx"],"names":["React","request","Login","props","handleUserName","event","setState","userName","target","value","handlePassWord","passWord","handleToken","state","checkBox","rememberMe","AccessToken","token","console","log","undefined","localStorage","setItem","persist","containerRef","loginImg","bind","handleLoginButton","Component","Promise","resolve","reject","url","form","username","password","method","err","res","body","JSON","parse","split"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport loginImg from \"../../logo.svg\";\nimport request from \"request\";\nexport class Login extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      userName: \"\",\n      passWord: \"\",\n      checkBox: true,\n      rememberMe: true\n    };\n  }\n\n  async handleLoginButton(event) {\n    var token = await AccessToken(this.state.userName, this.state.passWord);\n    console.log(token);\n    if (token !== undefined && !this.state.checkBox === true) {\n      localStorage.setItem(\"token\", token);\n      localStorage.setItem(\"rememberMe\", true);\n\n      this.setState({ rememberMe: false });\n    }\n\n    event.persist();\n  }\n  handleUserName = event => {\n    this.setState({ userName: event.target.value });\n  };\n  handlePassWord = event => {\n    this.setState({ passWord: event.target.value });\n  };\n  handleToken = event => {};\n  render() {\n    return (\n      <div className=\"base-container\" ref={this.props.containerRef}>\n        <div className=\"header\">Login</div>\n        <div className=\"content\">\n          <div className=\"image\">\n            <img src={loginImg} alt=\"\" />\n          </div>\n          <div className=\"form\">\n            <div className=\"form-group\">\n              <label htmlFor=\"username\">Username</label>\n              <input\n                type=\"text\"\n                name=\"username\"\n                placeholder=\"username\"\n                onChange={this.handleUserName.bind(this)}\n              />\n            </div>\n            <div className=\"form-group\">\n              <label htmlFor=\"password\">Password</label>\n              <input\n                type=\"password\"\n                name=\"password\"\n                placeholder=\"Password\"\n                onChange={this.handlePassWord.bind(this)}\n              />\n            </div>\n          </div>\n        </div>\n        <div className=\"loggedIn\">\n          <input\n            className=\"checkbox\"\n            type=\"checkbox\"\n            defaultChecked={false}\n            onChange={() => {\n              this.setState({ checkBox: !this.state.checkBox });\n            }}\n          />\n          <label>Keep me logged in </label>\n        </div>\n        <div className=\"footer\" onClick={this.handleLoginButton.bind(this)}>\n          <button type=\"button\" className=\"btn\">\n            Login\n          </button>\n        </div>\n      </div>\n    );\n  }\n}\nasync function AccessToken(userName, passWord) {\n  return new Promise((resolve, reject) =>\n    request(\n      {\n        url: \"http://node-server-t.herokuapp.com/api/v1/login\",\n        form: {\n          username: userName,\n          password: passWord\n        },\n        method: \"POST\"\n      },\n      (err, res, body) => {\n        if (err) throw err;\n        else {\n          var token = JSON.parse(body).token.split(\" \")[1];\n          resolve(token);\n        }\n      }\n    )\n  );\n}\n// function handleResponse(response, username) {\n//   if (response === \"Username Exists\") {\n//     alert(\"Username  already exists Exists\");\n//   } else if (response === \"Internal db error\") {\n//     alert(\"Something went wrong try again later\");\n//   } else {\n//     alert(\"Successfully insertd\");\n//   }\n// }\n"]},"metadata":{},"sourceType":"module"}