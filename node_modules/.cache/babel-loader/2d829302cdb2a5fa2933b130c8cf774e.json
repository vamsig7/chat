{"ast":null,"code":"import _classCallCheck from\"/home/krishnavamsi/Downloads/chat-master/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/krishnavamsi/Downloads/chat-master/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/krishnavamsi/Downloads/chat-master/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/krishnavamsi/Downloads/chat-master/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/krishnavamsi/Downloads/chat-master/node_modules/@babel/runtime/helpers/esm/inherits\";import React from\"react\";import Toolbar from\"../Toolbar\";import ToolbarButton from\"../ToolbarButton\";import Message from\"../Message\";import{store,collect}from\"react-recollect\";import request from\"request\";import\"./MessageList.css\";var MessageList=/*#__PURE__*/function(_React$Component){_inherits(MessageList,_React$Component);function MessageList(props){var _this;_classCallCheck(this,MessageList);_this=_possibleConstructorReturn(this,_getPrototypeOf(MessageList).call(this,props));_this.state={};return _this;}_createClass(MessageList,[{key:\"sendMessage\",value:function sendMessage(message){request.post({url:\"http://node-server-t.herokuapp.com/api/v1/sendMessage\",headers:{Authorization:\"Bearer \"+localStorage.getItem(\"token\"),convId:store.tasks[0].id},form:{message:message}},function(err,res,body){if(err)throw err;else console.log(body);});}},{key:\"onKeyPressed\",value:function onKeyPressed(event){if(event.key===\"Enter\"){this.sendMessage(event.target.value);store.tasks.push({id:event.target.value,message:event.target.value,isMine:true});event.target.value=\"\";}}},{key:\"render\",value:function render(){var _this2=this;return React.createElement(\"div\",{className:\"message-list\"},React.createElement(Toolbar,{title:\"Conversation Title\",rightItems:[React.createElement(ToolbarButton,{key:\"info\",icon:\"ion-ios-information-circle-outline\"}),React.createElement(ToolbarButton,{key:\"video\",icon:\"ion-ios-videocam\"}),React.createElement(ToolbarButton,{key:\"phone\",icon:\"ion-ios-call\"})]}),store.tasks.map(function(task){return React.createElement(Message,{key:task.id,task:task});}),React.createElement(\"div\",{className:\"compose\"},React.createElement(\"input\",{type:\"text\",className:\"compose-input\",defaultValue:\"\",placeholder:\"Type a message, @name\",onKeyDown:function onKeyDown(e){return _this2.onKeyPressed(e);},tabIndex:\"0\"})));}}]);return MessageList;}(React.Component);export default collect(MessageList);","map":{"version":3,"sources":["/home/krishnavamsi/Downloads/chat-master/src/components/chat/MessageList/index.js"],"names":["React","Toolbar","ToolbarButton","Message","store","collect","request","MessageList","props","state","message","post","url","headers","Authorization","localStorage","getItem","convId","tasks","id","form","err","res","body","console","log","event","key","sendMessage","target","value","push","isMine","map","task","e","onKeyPressed","Component"],"mappings":"qnBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,OAAP,KAAoB,YAApB,CACA,MAAOC,CAAAA,aAAP,KAA0B,kBAA1B,CACA,MAAOC,CAAAA,OAAP,KAAoB,YAApB,CACA,OAASC,KAAT,CAAgBC,OAAhB,KAA+B,iBAA/B,CACA,MAAOC,CAAAA,OAAP,KAAoB,SAApB,CACA,MAAO,mBAAP,C,GAEMC,CAAAA,W,iFACJ,qBAAYC,KAAZ,CAAmB,6CACjB,6EAAMA,KAAN,GACA,MAAKC,KAAL,CAAa,EAAb,CAFiB,aAGlB,C,wEACWC,O,CAAS,CACnBJ,OAAO,CAACK,IAAR,CACE,CACEC,GAAG,CAAE,uDADP,CAEEC,OAAO,CAAE,CACPC,aAAa,CAAE,UAAYC,YAAY,CAACC,OAAb,CAAqB,OAArB,CADpB,CAEPC,MAAM,CAAEb,KAAK,CAACc,KAAN,CAAY,CAAZ,EAAeC,EAFhB,CAFX,CAMEC,IAAI,CAAE,CACJV,OAAO,CAAEA,OADL,CANR,CADF,CAWE,SAACW,GAAD,CAAMC,GAAN,CAAWC,IAAX,CAAoB,CAClB,GAAIF,GAAJ,CAAS,KAAMA,CAAAA,GAAN,CAAT,IACKG,CAAAA,OAAO,CAACC,GAAR,CAAYF,IAAZ,EACN,CAdH,EAgBD,C,kDACYG,K,CAAO,CAClB,GAAIA,KAAK,CAACC,GAAN,GAAc,OAAlB,CAA2B,CACzB,KAAKC,WAAL,CAAiBF,KAAK,CAACG,MAAN,CAAaC,KAA9B,EACA1B,KAAK,CAACc,KAAN,CAAYa,IAAZ,CAAiB,CACfZ,EAAE,CAAEO,KAAK,CAACG,MAAN,CAAaC,KADF,CAEfpB,OAAO,CAAEgB,KAAK,CAACG,MAAN,CAAaC,KAFP,CAGfE,MAAM,CAAE,IAHO,CAAjB,EAKAN,KAAK,CAACG,MAAN,CAAaC,KAAb,CAAqB,EAArB,CACD,CACF,C,uCACQ,iBACP,MACE,4BAAK,SAAS,CAAC,cAAf,EACE,oBAAC,OAAD,EACE,KAAK,CAAC,oBADR,CAEE,UAAU,CAAE,CACV,oBAAC,aAAD,EACE,GAAG,CAAC,MADN,CAEE,IAAI,CAAC,oCAFP,EADU,CAKV,oBAAC,aAAD,EAAe,GAAG,CAAC,OAAnB,CAA2B,IAAI,CAAC,kBAAhC,EALU,CAMV,oBAAC,aAAD,EAAe,GAAG,CAAC,OAAnB,CAA2B,IAAI,CAAC,cAAhC,EANU,CAFd,EADF,CAaG1B,KAAK,CAACc,KAAN,CAAYe,GAAZ,CAAgB,SAAAC,IAAI,QACnB,qBAAC,OAAD,EAAS,GAAG,CAAEA,IAAI,CAACf,EAAnB,CAAuB,IAAI,CAAEe,IAA7B,EADmB,EAApB,CAbH,CAiBE,2BAAK,SAAS,CAAC,SAAf,EACE,6BACE,IAAI,CAAC,MADP,CAEE,SAAS,CAAC,eAFZ,CAGE,YAAY,CAAE,EAHhB,CAIE,WAAW,CAAC,uBAJd,CAKE,SAAS,CAAE,mBAAAC,CAAC,QAAI,CAAA,MAAI,CAACC,YAAL,CAAkBD,CAAlB,CAAJ,EALd,CAME,QAAQ,CAAC,GANX,EADF,CAjBF,CADF,CA8BD,C,yBAjEuBnC,KAAK,CAACqC,S,EAmEhC,cAAehC,CAAAA,OAAO,CAACE,WAAD,CAAtB","sourcesContent":["import React from \"react\";\nimport Toolbar from \"../Toolbar\";\nimport ToolbarButton from \"../ToolbarButton\";\nimport Message from \"../Message\";\nimport { store, collect } from \"react-recollect\";\nimport request from \"request\";\nimport \"./MessageList.css\";\n\nclass MessageList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n  sendMessage(message) {\n    request.post(\n      {\n        url: \"http://node-server-t.herokuapp.com/api/v1/sendMessage\",\n        headers: {\n          Authorization: \"Bearer \" + localStorage.getItem(\"token\"),\n          convId: store.tasks[0].id\n        },\n        form: {\n          message: message\n        }\n      },\n      (err, res, body) => {\n        if (err) throw err;\n        else console.log(body);\n      }\n    );\n  }\n  onKeyPressed(event) {\n    if (event.key === \"Enter\") {\n      this.sendMessage(event.target.value);\n      store.tasks.push({\n        id: event.target.value,\n        message: event.target.value,\n        isMine: true\n      });\n      event.target.value = \"\";\n    }\n  }\n  render() {\n    return (\n      <div className=\"message-list\">\n        <Toolbar\n          title=\"Conversation Title\"\n          rightItems={[\n            <ToolbarButton\n              key=\"info\"\n              icon=\"ion-ios-information-circle-outline\"\n            />,\n            <ToolbarButton key=\"video\" icon=\"ion-ios-videocam\" />,\n            <ToolbarButton key=\"phone\" icon=\"ion-ios-call\" />\n          ]}\n        />\n\n        {store.tasks.map(task => (\n          <Message key={task.id} task={task} />\n        ))}\n\n        <div className=\"compose\">\n          <input\n            type=\"text\"\n            className=\"compose-input\"\n            defaultValue={\"\"}\n            placeholder=\"Type a message, @name\"\n            onKeyDown={e => this.onKeyPressed(e)}\n            tabIndex=\"0\"\n          />\n        </div>\n      </div>\n    );\n  }\n}\nexport default collect(MessageList);\n"]},"metadata":{},"sourceType":"module"}