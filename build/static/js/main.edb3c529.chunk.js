(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{195:function(e,t,a){e.exports=a(451)},200:function(e,t,a){},201:function(e,t,a){},202:function(e,t,a){},217:function(e,t){},219:function(e,t){},249:function(e,t){},250:function(e,t){},294:function(e,t){},296:function(e,t){},319:function(e,t){},427:function(e,t,a){},428:function(e,t,a){},429:function(e,t,a){},446:function(e,t,a){},448:function(e,t,a){},449:function(e,t,a){},450:function(e,t,a){},451:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(192),c=a.n(s),o=(a(200),a(26)),i=a(27),l=a(29),m=a(28),u=a(30),d=(a(201),a(202),a(19)),h=a.n(d),v=a(71),f=a.n(v),p=a(21),g=a.n(p),E=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).handleUserName=function(e){a.setState({userName:e.target.value})},a.handlePassWord=function(e){a.setState({passWord:e.target.value})},a.handleToken=function(e){},a.state={userName:"",passWord:"",checkBox:!0,rememberMe:!0},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"handleLoginButton",value:function(e){var t;return h.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,h.a.awrap(b(this.state.userName,this.state.passWord));case 2:t=a.sent,console.log(t),void 0!==t&&!0===!this.state.checkBox&&(localStorage.setItem("token",t),localStorage.setItem("rememberMe",!0),this.setState({rememberMe:!1})),e.persist();case 6:case"end":return a.stop()}}),null,this)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"base-container",ref:this.props.containerRef},r.a.createElement("div",{className:"header"},"Login"),r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"image"},r.a.createElement("img",{src:f.a,alt:""})),r.a.createElement("div",{className:"form"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"username"},"Username"),r.a.createElement("input",{type:"text",name:"username",placeholder:"username",onChange:this.handleUserName.bind(this)})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",name:"password",placeholder:"Password",onChange:this.handlePassWord.bind(this)})))),r.a.createElement("div",{className:"loggedIn"},r.a.createElement("input",{className:"checkbox",type:"checkbox",defaultChecked:!1,onChange:function(){e.setState({checkBox:!e.state.checkBox})}}),r.a.createElement("label",null,"Keep me logged in ")),r.a.createElement("div",{className:"footer",onClick:this.handleLoginButton.bind(this)},r.a.createElement("button",{type:"button",className:"btn"},"Login")))}}]),t}(r.a.Component);function b(e,t){return h.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",new Promise((function(a,n){return g()({url:"http://node-server-t.herokuapp.com/api/v1/login",form:{username:e,password:t},method:"POST"},(function(e,t,n){if(e)throw e;var r=JSON.parse(n).token.split(" ")[1];a(r)}))})));case 1:case"end":return a.stop()}}))}var k=a(410),N=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).handleUserName=function(e){a.setState({userName:e.target.value})},a.handlePassWord=function(e){a.setState({passWord:e.target.value})},a.state={userName:"",passWord:""},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"handleRegisterButton",value:function(e){var t,a;t=this.state.userName,a=this.state.passWord,k({method:"POST",uri:"http://node-server-t.herokuapp.com/api/v1/create",form:{username:t,password:a}}).then((function(e){console.log(e),function(e,t){"Username Exists"===e?alert("Username  already exists Exists"):"Internal db error"===e?alert("Internal error"):(e="Successfully inserted "+t+" credentials")?alert("Successfully inserted"):alert("Check your Internet Connection")}(e,t)})).catch((function(e){console.log(e)})),console.log(this.state.userName),e.preventDefault()}},{key:"render",value:function(){return r.a.createElement("div",{className:"base-container",ref:this.props.containerRef},r.a.createElement("div",{className:"header"},"Register"),r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"image"},r.a.createElement("img",{src:f.a,alt:""})),r.a.createElement("div",{className:"form"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"username"},"Username"),r.a.createElement("input",{type:"text",name:"username",placeholder:"username",onChange:this.handleUserName.bind(this)})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"text",name:"password",placeholder:"passowrd",onChange:this.handlePassWord.bind(this)})))),r.a.createElement("div",{className:"footer",onClick:this.handleRegisterButton.bind(this)},r.a.createElement("button",{type:"button",className:"btn"},"Register")))}}]),t}(r.a.Component);var y=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).state={isLogginActive:!0},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.rightSide.classList.add("right")}},{key:"changeState",value:function(){this.state.isLogginActive?(this.rightSide.classList.remove("right"),this.rightSide.classList.add("left")):(this.rightSide.classList.remove("left"),this.rightSide.classList.add("right")),this.setState((function(e){return{isLogginActive:!e.isLogginActive}}))}},{key:"render",value:function(){var e=this,t=this.state.isLogginActive,a=t?"Register":"Login",n=t?"login":"register";return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"login"},r.a.createElement("div",{className:"container",ref:function(t){return e.container=t}},t&&r.a.createElement(E,{containerRef:function(t){return e.current=t}}),!t&&r.a.createElement(N,{containerRef:function(t){return e.current=t}})),r.a.createElement(O,{current:a,currentActive:n,containerRef:function(t){return e.rightSide=t},onClick:this.changeState.bind(this)})))}}]),t}(r.a.Component),O=function(e){return r.a.createElement("div",{className:"right-side",ref:e.containerRef,onClick:e.onClick},r.a.createElement("div",{className:"inner-container"},r.a.createElement("div",{className:"text"},e.current)))},j=a(102),w=a(72),S=a(193),x=a(15);a(427);var I=Object(x.collect)((function(e){Object(n.useEffect)((function(){Object(S.a)(".conversation-snippet",20)}));var t=e.data,a=t.photo,s=t.name,c=t.convId;return r.a.createElement("div",{className:"conversation-list-item",onClick:function(){return h.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return delete x.store.tasks,x.store.tasks=[],e.next=4,h.a.awrap(h.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:g.a.get({url:"http://node-server-t.herokuapp.com/api/v1/getMessages",headers:{Authorization:"Bearer "+localStorage.getItem("token"),convId:c}},(function(e,t,a){if(e)console.log("error here");else{var n=JSON.parse(a).data.messages[0];console.log("this is message section"+n),void 0!==n&&x.store.tasks.push({id:c,message:n,isMine:!1})}}));case 1:case"end":return e.stop()}})));case 4:e.sent;case 5:case"end":return e.stop()}}))}},r.a.createElement("img",{className:"conversation-photo",src:a,alt:"conversation"}),r.a.createElement("div",{className:"conversation-info"},r.a.createElement("h1",{className:"conversation-title"},s),r.a.createElement("p",{className:"conversation-snippet"},c)))}));a(428);function C(e){var t=e.title,a=e.leftItems,n=e.rightItems;return r.a.createElement("div",{className:"toolbar"},r.a.createElement("div",{className:"left-items"},a),r.a.createElement("h1",{className:"toolbar-title"},t),r.a.createElement("div",{className:"right-items"},n))}a(429);function M(e){var t=e.icon;return r.a.createElement("i",{className:"toolbar-button ".concat(t)})}var L=a(194),B=a.n(L);a(446);function P(e){var t=Object(n.useState)([]),a=Object(w.a)(t,2),s=a[0],c=a[1],o=Object(n.useState)(!1),i=Object(w.a)(o,2),l=i[0],m=i[1],u=Object(n.useState)(""),d=Object(w.a)(u,2);d[0],d[1];function v(){m(!l)}function f(e){return h.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:g.a.post({url:"http://node-server-t.herokuapp.com/api/v1/sendMessage",headers:{Authorization:"Bearer "+localStorage.getItem("token")},form:{username:e,message:"fisrtMessage"}},(function(t,a,n){if(t)throw t;var r=JSON.parse(n);if(200===r.status){var s=r.convId;p(e,s)}else 401===r.status&&alert("invalid username")}));case 1:case"end":return t.stop()}}))}var p=function(e,t){B.a.get("https://randomuser.me/api/?results=1").then((function(a){var n=a.data.results.map((function(a){return{photo:a.picture.large,name:e,convId:t}}));c([].concat(Object(j.a)(s),Object(j.a)(n)))}))};return r.a.createElement("div",null,r.a.createElement("div",{className:"conversation-list"},r.a.createElement(C,{title:"Messenger",leftItems:[r.a.createElement(M,{key:"cog",icon:"ion-ios-cog"})],rightItems:[r.a.createElement(M,{key:"add",icon:"ion-ios-add-circle-outline"})]}),r.a.createElement("div",{className:"footer"},r.a.createElement("button",{type:"button",onClick:v},"New Message")),r.a.createElement("div",null,l?r.a.createElement("div",{className:"popup"},r.a.createElement("div",null,r.a.createElement("input",{type:"text",name:"username",placeholder:"username",onKeyDown:function(e){!function(e){var t;h.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if("Enter"!==e.key){a.next=5;break}return t=e.target.value,a.next=4,h.a.awrap(f(t));case 4:a.sent;case 5:case"end":return a.stop()}}))}(e)}})),r.a.createElement("button",{onClick:v},"close me")):null),s.map((function(e){return r.a.createElement(I,{key:e.name,data:e})}))))}a(447),a(448);var W=Object(x.collect)((function(e){var t=e.task.message,a=e.task.isMine;return console.log(t),r.a.createElement("div",{className:["message","".concat(a?"mine":"")].join(" ")},r.a.createElement("div",{className:"bubble-container"},r.a.createElement("div",{className:"bubble"},t)))})),R=(a(449),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).state={},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"sendMessage",value:function(e){g.a.post({url:"http://node-server-t.herokuapp.com/api/v1/sendMessage",headers:{Authorization:"Bearer "+localStorage.getItem("token"),convId:x.store.tasks[0].id},form:{message:e}},(function(e,t,a){if(e)throw e;console.log(a)}))}},{key:"onKeyPressed",value:function(e){"Enter"===e.key&&(this.sendMessage(e.target.value),x.store.tasks.push({id:e.target.value,message:e.target.value,isMine:!0}),e.target.value="")}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"message-list"},r.a.createElement(C,{title:"Conversation Title",rightItems:[r.a.createElement(M,{key:"info",icon:"ion-ios-information-circle-outline"}),r.a.createElement(M,{key:"video",icon:"ion-ios-videocam"}),r.a.createElement(M,{key:"phone",icon:"ion-ios-call"})]}),x.store.tasks.map((function(e){return r.a.createElement(W,{key:e.id,task:e})})),r.a.createElement("div",{className:"compose"},r.a.createElement("input",{type:"text",className:"compose-input",defaultValue:"",placeholder:"Type a message, @name",onKeyDown:function(t){return e.onKeyPressed(t)},tabIndex:"0"})))}}]),t}(r.a.Component)),A=Object(x.collect)(R);a(450);function U(e){return r.a.createElement("div",{className:"messenger"},r.a.createElement("div",{className:"scrollable sidebar"},r.a.createElement(P,null)),r.a.createElement("div",{className:"scrollable content"},r.a.createElement(A,null)))}a(21);var T=function(){return r.a.createElement(U,null)},D=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).state={userToken:"",rememberMe:!1},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.setState({rememberMe:localStorage.getItem("rememberMe")}),this.setState({userToken:localStorage.getItem("token")})}},{key:"render",value:function(){return this.state.rememberMe?r.a.createElement(T,null):r.a.createElement(y,null)}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));x.store.tasks=[{id:1,meesage:"Example task!",isMine:!1}],c.a.render(r.a.createElement(D,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},71:function(e,t,a){e.exports=a.p+"static/media/logo.9a76e74e.svg"}},[[195,1,2]]]);
//# sourceMappingURL=main.edb3c529.chunk.js.map